import{_ as ee}from"./Loading.5d8fff2d.js";import{_ as ae,a as te}from"./Button.f151897d.js";import{_ as le,a as se,b as oe}from"./Input.vue.1a2fc455.js";import{_ as N,a as ne}from"./Toggle.vue.68b9afc4.js";import{a as C,y as U,z as W,o as a,j as c,F as g,A as R,c as l,i as D,u as ie,w as k,k as w,B as ue,b as ce,C as re,D as h,e as p,E as de,q as me,s as u,h as B,t as E,x as _e,G as ve,T as fe}from"./entry.851d371b.js";import{_ as pe}from"./TaskListItem.vue.d15d77d3.js";import{D as ke,_ as ge}from"./index.3cd2ef10.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Label.vue.bf611525.js";import"./TaskTagsView.vue.759a05ec.js";import"./nuxt-link.2687c399.js";const ye={class:"flex flex-col mt-1 gap-2"},Te=C({__name:"TagTasksEdit",props:{tag:null,showTags:{type:Boolean}},async setup(r){let o,d;const y=([o,d]=U(()=>W()),o=await o,d(),o);return(T,m)=>{const _=N;return a(),c("div",ye,[(a(!0),c(g,null,R(ie(y).tasks,e=>(a(),l(_,{key:e.id,"model-value":e.data.tags.includes(r.tag.id),label:e.title,flat:"",class:D(["!justify-start","h-auto","text-left",{"line-through":e.isDone,"opacity-50":!e.isAvailable}]),"onUpdate:modelValue":V=>{V?e.tagAdd(r.tag):e.tagRemove(r.tag)}},null,8,["model-value","label","class","onUpdate:modelValue"]))),128))])}}}),we=C({__name:"TagTasksView",props:{tag:null,showHidden:{type:Boolean}},setup(r){return(o,d)=>{const y=pe,T=ne;return a(),l(T,{group:"",class:"flex flex-col gap-2"},{default:k(()=>[(a(!0),c(g,null,R(r.tag.tasks,m=>(a(),c(g,{key:m.id},[r.showHidden||m.isAvailable?(a(),l(y,{key:0,task:m},null,8,["task"])):w("",!0)],64))),128))]),_:1})}}}),Ve=B("div",{class:"flex-grow"},null,-1),Ae={class:"text-primary"},Ne=C({__name:"[id]",async setup(r){let o,d;const y=ue(),T=ce(),m=re();let _=h(!1),e=h(null);const V=p(()=>y.params.id);de(async()=>e.value=await ve(V.value));const i={VIEW:1,EDIT:2,AVAILABILITY:3,RELATIONS:4,TASKS:5};let v=h(i.VIEW),F=p(()=>v.value===i.VIEW),A=p({get(){return v.value===i.EDIT},set(t){v.value=t?i.EDIT:i.VIEW}}),I=p({get(){return v.value===i.AVAILABILITY},set(t){v.value=t?i.AVAILABILITY:i.VIEW}});async function H(){const{value:t}=await ke.confirm({message:"Are you sure you want to delete this tag?"});t&&(await m.tagDelete(V.value),T.back())}const Y=([o,d]=U(()=>W()),o=await o,d(),o);let f=h("");async function L(){const t=fe.fromData({title:f.value});return await Y.taskSave(t),e.value&&t.tagAdd(e.value),f.value="",t}async function j(){const t=await L();T.push({path:`/task/${t.id}`})}function z(){f.value=""}const S=p(()=>!!f.value),G=p(()=>e.value&&e.value.isAvailable&&e.value.tasks.length>e.value.tasks.filter(t=>t.isAvailable).length);return(t,n)=>{const P=ee,x=ae,q=le,K=se,O=Te,J=we,M=ge,Q=te,b=N,$=oe,X=me;return e.value?(a(),l(X,{key:1,name:"common"},{header:k(()=>[u(x,{icon:"fa6-solid:trash",flat:"",onClick:H}),Ve,B("div",{class:D(["pr-3","flex","flex-col","items-end","gap-1","transition-opacity","duration-300",{"opacity-50":!e.value.isAvailable}])},[B("div",Ae,E(e.value.name),1),u(q,{total:e.value.tasksTotal,done:e.value.tasksDone,class:"lowercase"},{default:k(({total:s,done:Z})=>[_e(E(Z)+" / "+E(s)+" tasks ",1)]),_:1},8,["total","done"]),u(K,{"ms-switch-after":e.value.tsSwitchAt,"is-available":e.value.isAvailable},null,8,["ms-switch-after","is-available"])],2)]),default:k(()=>[(a(),c("div",{key:v.value,class:"px-4 py-1"},[A.value?(a(),l(O,{key:0,tag:e.value},null,8,["tag"])):w("",!0),F.value?(a(),l(J,{key:1,tag:e.value,"show-hidden":_.value||!e.value.isAvailable},null,8,["tag","show-hidden"])):w("",!0),I.value?(a(),l(M,{key:"availability",available:e.value},null,8,["available"])):w("",!0)]))]),footer:k(()=>[S.value?(a(),l(x,{key:"task-discard",icon:"fa6-solid:xmark",flat:"",onClick:z})):(a(),c(g,{key:1},[G.value?(a(),l(b,{key:"show-hidden",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=s=>_.value=s),class:D([_.value&&"text-primary"]),flat:""},{default:k(()=>[u(Q,{name:"fa6-solid:eye"})]),_:1},8,["modelValue","class"])):w("",!0)],64)),A.value?(a(),l($,{key:"tag-name",modelValue:e.value.name,"onUpdate:modelValue":n[1]||(n[1]=s=>e.value.name=s),flat:"",class:"flex-grow"},null,8,["modelValue"])):(a(),l($,{key:"task-name",modelValue:f.value,"onUpdate:modelValue":n[2]||(n[2]=s=>f.value=s),class:"flex-grow",placeholder:"New task",flat:""},null,8,["modelValue"])),S.value?(a(),c(g,{key:4},[u(x,{key:"task-save-and-edit",flat:"",icon:"fluent:save-edit-24-filled",onClick:j}),u(x,{key:"task-save",flat:"",icon:"fluent:save-24-filled",onClick:L})],64)):(a(),c(g,{key:5},[u(b,{key:"state-availability",modelValue:I.value,"onUpdate:modelValue":n[3]||(n[3]=s=>I.value=s),icon:"mdi:calendar-clock",flat:""},null,8,["modelValue"]),u(b,{key:"state-edit",modelValue:A.value,"onUpdate:modelValue":n[4]||(n[4]=s=>A.value=s),icon:"fa6-solid:pencil",flat:""},null,8,["modelValue"])],64))]),_:1})):(a(),l(P,{key:0}))}}});export{Ne as default};

!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="1699bf47-bc0b-4c6e-96a5-ae1afbf6eebc")}catch(e){}}()
//# debugId=1699bf47-bc0b-4c6e-96a5-ae1afbf6eebc
//# sourceMappingURL=_id_.07e3c549.js.map